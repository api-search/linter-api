"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.virtualFs = void 0;
const path_1 = require("@stoplight/path");
const virtualFs = ({ fs }) => ({
    name: '@stoplight-spectral/virtual-fs',
    resolveId(source, importer) {
        const { protocol } = (0, path_1.parse)(source);
        if (protocol === 'http' || protocol === 'https') {
            return null;
        }
        if (protocol !== 'file' && !/^[./]/.test(source)) {
            return null;
        }
        if ((0, path_1.isAbsolute)(source)) {
            return (0, path_1.normalize)(source);
        }
        if (importer !== void 0) {
            return (0, path_1.join)((0, path_1.dirname)(importer), source);
        }
        return source;
    },
    load(id) {
        if (!(0, path_1.isURL)(id)) {
            return fs.promises.readFile(id, 'utf8');
        }
        return;
    },
});
exports.virtualFs = virtualFs;
//# sourceMappingURL=virtualFs.js.map